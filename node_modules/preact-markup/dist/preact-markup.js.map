{"version":3,"file":null,"sources":["../src/parse-markup.js","../src/to-vdom.js","../src/markup-to-vdom.js","../src/index.js"],"sourcesContent":["let parserDoc;\n\n/** Parse markup into a DOM using the given mimetype.\n *\t@param {String} markup\n */\nexport default function parseMarkup(markup, type) {\n\tlet doc,\n\t\tmime = type==='html' ? 'text/html' : 'application/xml',\n\t\tparserError, wrappedMarkup, tag;\n\n\t// wrap with an element so we can find it after parsing, and to support multiple root nodes\n\tif (type==='html') {\n\t\ttag = 'body';\n\t\twrappedMarkup = '<!DOCTYPE html>\\n<html><body>'+markup+'</body></html>';\n\t}\n\telse {\n\t\ttag = 'xml';\n\t\twrappedMarkup = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n<xml>'+markup+'</xml>';\n\t}\n\n\t// if available (browser support varies), using DOMPaser in HTML mode is much faster, safer and cleaner than injecting HTML into an iframe.\n\ttry {\n\t\tdoc = new DOMParser().parseFromString(wrappedMarkup, mime);\n\t} catch (err) {\n\t\tparserError = err;\n\t}\n\n\t// fall back to using an iframe to parse HTML (not applicable for XML, since DOMParser() for XML works in IE9+):\n\tif (!doc && type==='html') {\n\t\tdoc = parserDoc || (parserDoc = buildParserFrame());\n\t\tdoc.open();\n\t\tdoc.write(wrappedMarkup);\n\t\tdoc.close();\n\t}\n\n\tif (!doc) return;\n\n\t// retrieve our wrapper node\n\tlet out = doc.getElementsByTagName(tag)[0],\n\t\tfc = out.firstChild;\n\n\tif (markup && !fc) {\n\t\tout.error = 'Document parse failed.';\n\t}\n\n\t// pluck out parser errors\n\tif (fc && String(fc.nodeName).toLowerCase()==='parsererror') {\n\t\t// remove post/preamble to get just the error message as text\n\t\tfc.removeChild(fc.firstChild);\n\t\tfc.removeChild(fc.lastChild);\n\t\tout.error = (fc.textContent || fc.nodeValue || parserError || 'Unknown error');\n\t\t// remove the error from the DOM leaving things nice and tidy\n\t\tout.removeChild(fc);\n\t}\n\n\treturn out;\n}\n\n/** A shared frame is used for the fallback HTML parser, built on-demand. */\nfunction buildParserFrame() {\n\tif (document.implementation && document.implementation.createHTMLDocument) {\n\t\treturn document.implementation.createHTMLDocument('');\n\t}\n\tlet frame = document.createElement('iframe');\n\tframe.style.cssText = 'position:absolute; left:0; top:-999em; width:1px; height:1px; overflow:hidden;';\n\tframe.setAttribute('sandbox', 'allow-forms');\n\tdocument.body.appendChild(frame);\n\treturn frame.contentWindow.document;\n}\n","\nconst EMPTY_OBJ = {};\n\n// deeply convert an XML DOM to VDOM\nexport default function toVdom(node, visitor, h, options) {\n\twalk.visitor = visitor;\n\twalk.h = h;\n\twalk.options = options || EMPTY_OBJ;\n\treturn walk(node);\n}\n\nfunction walk(n, index, arr) {\n\tif (n.nodeType===3) {\n\t\tlet text = 'textContent' in n ? n.textContent : n.nodeValue || '';\n\n\t\tif (walk.options.trim!==false) {\n\t\t\tlet isFirstOrLast = index===0 || index===arr.length-1;\n\n\t\t\t// trim strings but don't entirely collapse whitespace\n\t\t\tif (text.match(/^[\\s\\n]+$/g) && walk.options.trim!=='all') {\n\t\t\t\ttext = ' ';\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttext = text.replace(/(^[\\s\\n]+|[\\s\\n]+$)/g, walk.options.trim==='all' || isFirstOrLast ? '' : ' ');\n\t\t\t}\n\t\t\t// skip leading/trailing whitespace\n\t\t\t// if (!text || text===' ' && arr.length>1 && (index===0 || index===arr.length-1)) return null;\n\t\t\tif ((!text || text===' ') && arr.length>1 && isFirstOrLast) return null;\n\t\t\t// if (!text && arr.length>1 && (index===0 || index===arr.length-1)) return null;\n\t\t\t// if (!text || text===' ') return null;\n\t\t}\n\t\treturn text;\n\t}\n\tif (n.nodeType!==1) return null;\n\tlet nodeName = String(n.nodeName).toLowerCase();\n\n\t// Do not allow script tags unless explicitly specified\n\tif (nodeName==='script' && !walk.options.allowScripts) return null;\n\n\tlet out = walk.h(\n\t\tnodeName,\n\t\tgetProps(n.attributes),\n\t\twalkChildren(n.childNodes)\n\t);\n\tif (walk.visitor) walk.visitor(out);\n\treturn out;\n}\n\nfunction getProps(attrs) {\n\tlet len = attrs && attrs.length;\n\tif (!len) return null;\n\tlet props = {};\n\tfor (let i=0; i<len; i++) {\n\t\tlet { name, value } = attrs[i];\n\t\tif (value==='') value = true;\n\t\tif (name.substring(0,2)==='on' && walk.options.allowEvents){\n\t\t\tvalue  = new Function(value); // eslint-disable-line no-new-func\n\t\t}\n\t\tprops[name] = value;\n\t}\n\treturn props;\n}\n\nfunction walkChildren(children) {\n\tlet c = children && Array.prototype.map.call(children, walk).filter(exists);\n\treturn c && c.length ? c : null;\n}\n\nlet exists = x => x;\n","import parseMarkup from './parse-markup';\nimport toVdom from './to-vdom';\n\nconst EMPTY_OBJ = {};\n\n/** Convert markup into a virtual DOM.\n*\t@param {String} markup\t\tHTML or XML markup (indicate via `type`)\n*\t@param {String} [type=xml]\tA type to use when parsing `markup`. Either `xml` or `html`.\n*\t@param {Function} reviver\tThe JSX/hyperscript reviver (`h` function) to use. For example, Preact's `h` or `ReactDOM.createElement`.\n*\t@param {Object} [map]\t\tOptional map of custom element names to Components or variant element names.\n */\nexport default function markupToVdom(markup, type, reviver, map, options) {\n\tlet dom = parseMarkup(markup, type);\n\n\tif (dom && dom.error) {\n\t\tthrow new Error(dom.error);\n\t}\n\n\tlet body = dom && dom.body || dom;\n\tvisitor.map = map || EMPTY_OBJ;\n\tlet vdom = body && toVdom(body, visitor, reviver, options);\n\tvisitor.map = null;\n\n\n\treturn vdom && vdom.children || null;\n}\n\nfunction toCamelCase(name) {\n\treturn name.replace(/-(.)/g, (match, letter) =>letter.toUpperCase());\n}\n\nfunction visitor(node) {\n\tlet name = node.nodeName.toLowerCase(),\n\t\tmap = visitor.map;\n\tif (map && map.hasOwnProperty(name)){\n\t\tnode.nodeName = map[name];\n\t\tnode.attributes = Object.keys(node.attributes || {}).reduce((attrs,attrName)=>{\n\t\t\tattrs[toCamelCase(attrName)] = node.attributes[attrName];\n\t\t\treturn attrs;\n\t\t},{});\n\t} else {\n\t\tnode.nodeName =  name.replace(/[^a-z0-9-]/i,'');\n\t}\n\n}\n","import { h as defaultReviver, Component } from 'preact';\nimport markupToVdom from './markup-to-vdom';\n\nlet customReviver;\n\nexport default class Markup extends Component {\n\tstatic setReviver(h) {\n\t\tcustomReviver = h;\n\t}\n\n\tshouldComponentUpdate({ wrap, type, markup }) {\n\t\tlet p = this.props;\n\t\treturn wrap!==p.wrap || type!==p.type || markup!==p.markup;\n\t}\n\n\tsetComponents(components) {\n\t\tthis.map = {};\n\t\tif (components) {\n\t\t\tfor (let i in components) {\n\t\t\t\tif (components.hasOwnProperty(i)) {\n\t\t\t\t\tlet name = i.replace(/([A-Z]+)([A-Z][a-z0-9])|([a-z0-9]+)([A-Z])/g, '$1$3-$2$4').toLowerCase();\n\t\t\t\t\tthis.map[name] = components[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trender({ wrap=true, type, markup, components, reviver, onError, 'allow-scripts':allowScripts, 'allow-events':allowEvents, trim, ...props }) {\n\t\tlet h = reviver || this.reviver || this.constructor.prototype.reviver || customReviver || defaultReviver,\n\t\t\tvdom;\n\n\t\tthis.setComponents(components);\n\n\t\tlet options = {\n\t\t\tallowScripts,\n\t\t\tallowEvents,\n\t\t\ttrim\n\t\t};\n\n\t\ttry {\n\t\t\tvdom = markupToVdom(markup, type, h, this.map, options);\n\t\t} catch (error) {\n\t\t\tif (onError) {\n\t\t\t\tonError({ error });\n\t\t\t}\n\t\t\telse if (typeof console!=='undefined' && console.error) {\n\t\t\t\tconsole.error(`preact-markup: ${error}`);\n\t\t\t}\n\t\t}\n\n\t\tif (wrap===false) return vdom && vdom[0] || null;\n\n\t\tlet c = props.hasOwnProperty('className') ? 'className' : 'class',\n\t\t\tcl = props[c];\n\t\tif (!cl) props[c] = 'markup';\n\t\telse if (cl.splice) cl.splice(0, 0, 'markup');\n\t\telse if (typeof cl==='string') props[c] += ' markup';\n\t\telse if (typeof cl==='object') cl.markup = true;\n\n\t\treturn h('div', props, vdom || null);\n\t}\n}\n"],"names":["EMPTY_OBJ","defaultReviver","Component"],"mappings":"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"}